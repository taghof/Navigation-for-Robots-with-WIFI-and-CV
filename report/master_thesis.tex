%\documentclass[12pt,a4paper,twoside,openright,fleqn]{memoir}
\documentclass[10pt]{article}
\usepackage[danish]{babel}
\usepackage[ansinew]{inputenc}
\usepackage{graphicx}
\usepackage{subfig}
\usepackage{listings}
\usepackage{natbib}
\usepackage{titleref}

\begin{document} 

%\newcommand{\oversaet}[1]{(\textit{#1})}


\title{Master Thesis}
\author{Thomas Thyregod 20051688\\ Morten Daugaard 20051715\\ \texttt{ tysse, taghof }@cs.au.dk\\\\ Department of Computer Science, University of Aarhus\\ Aabogade 34, 8200 Aarhus N, Denmark\\\\
\hline\\
\vspace{4cm}\\
\makeatletter
\texttt{Semi Autonomous Navigation}\\
\texttt{for Arial Robots}\\
\vspace{4cm}\\
\hline\\
}
\date{\today}
\maketitle
\newpage

\pagestyle{headings}

\section*{Resume Abstrakt}

\pagebreak

\tableofcontents

\pagebreak

\section{Introduktion}
\subsection{området, teknologi}
\subsection{}
\subsection{}

\pagebreak
\section{AR.Drone}
AR.Drone er en quadrocopter fremstillet og udviklet af det franske
firma Parrot. En quadrocopter benytter fire faste rotorer til at
generere opdrift, samt til at styre sin bevægelse i rummet. 
\\AR.Drone blev introduceret i 2010 og har siden fundet stor anvendelse, ikke
blot som et stykke avanceret legetøj, men også som en
udviklingsplatform til forskere og studerende. En AR.Drone kommer med et
sæt sensorer bestående af to kameraer(et vertikalt nedadrettet og et
horisontalt fremadrettet), en højdemåler, gyroskop(til at måle
hældning, krængning og drejning), samt et accelerometer. I 2012 ventes
en opdateret udgave af AR.Drone, denne forventes at tilføje HD kamera,
trykmåler og kompas til platformen.
\\AR.Drone er opbygget som en letvægtskonstruktion af kulfiber, plast og
skummateriale og kommer med to forskellige skumskjold til henholdsvis
indendørs og udendørs flyvning.

\begin{figure}[h]
\centering
  \subfloat[Indendørsskjold]{
    \label{fig:indendørsskjold}
    \includegraphics[width=0.45\textwidth]{parrot-ardrone.jpg}
  }
  ~ %add desired spacing between images, e. g. ~, \quad, \qquad etc. (or a blank line to force the subfig onto a new line)
  \subfloat[Udendørsskjold]{
    \label{fig:udendørsskjold}
    \includegraphics[width=0.45\textwidth]{parrot-ardrone-outdoor.jpg}
  }
  \caption{AR.Drone med indendørs- og udendørsskjold}
  \label{fig:ardrone}
\end{figure}
 
\subsection{Hardware}
\label{ssec:hardware}
Som de fleste robotter består AR.Drone af et antal sensorer, et antal
aktuatorer og en styringsenhed. 
\\AR.Drone er udstyret med to kameraer, det fremadrettede er en 93
graders CMOS sensor som kan levere 640x480 billeder(selvom
resourceknaphed gør at opløsningen der transmitteres fra dronen
kun er 320x240(QVGA)) med en framerate på 15/s. Det nedadvendte kamera er
en 64 graders CMOS sensor, der tager billeder i 176x144(QCIF) med en
framerate på 60/s.
\\Til at bestemme dronens højde over jorden anvendes en ultrasonisk
højdemåler, denne opererer ved at udsende en ultralydspuls og herefter
måle tidsintervallet der går før ekkoet måles. Højdemåleren er angivet
til at virke op til seks meters højde og er rent fysisk placeret på
dronens navboard. Det er værd at bemærke, at højdemåleren ikke måler
højden på et specifikt punkt, men derimod returnerer den mindste højde
i et område som det på \ref{fig:sonicbeam}, samt at ultrasoniske
detektorer generelt har problemer med bløde og skrånende overflader.
\begin{figure}[h]
\centering
\includegraphics[width=0.80\textwidth]{sonardzone.jpg}
\caption{Udslagsområde for en ultrasonisk sensor}
\label{fig:sonicbeam}
\end{figure}

AR.drone er udstyret med to gyroskoper, et 2-akses gyroskop til at
måle hældningsraten om x- og y-aksen samt et piezoelektrisk gyroskop
til at måle rotationen om z-aksen. Gyroskoperne kombineres med et
3-akses accelerometer i en samlet IMU-enhed, denne anvendes til
løbende at give estimater af Euler-vinklerne(theta, phi og psi).  
\\Dronens aktuatorer er de fire børsteløse 15W motorer. Motorerne
arbejder i intervallet 10350 til 41400 RPM og når dronen står stille i
luften arbejder motorerne med 28000 RPM. Dette svarer, grundet gearingen,
til 3300 RPM for propellerne.
\\Den centrale styringsenhed på dronen er en ARM9 468 mHz
processor(Parrot 6 ARM926EJ) med 128 mb DDR ram og et integreret
trådløst netværkskort(Atheros AR6102G-BM2D). Enheden giver også adgang
til en On-The-Go USB port som primært anvendes ved opdateringer.
\\Batterierne der driver alle enhederne er af lithium-polymer typen og
giver ifølge dokumentationen ca. 12 minutters flyvetid.
  
\subsection{Software}
\label{ssec:software}
Dronens microcomputer kommer med en Linux 2.6.27 kerne
installeret. Det bemærkes at 2.6.27 er den første kerne med indbygget
support for UBIFS som er det filsystem der anvendes på dronens
flashmemory.
\\Udover Linux kernen leveres AR.Drone også med Busybox installeret.
Busybox giver adgang til en række unix værktøjer der er optimeret til
brug i embeddede systemer og er derfor et meget populært valg blandt
udviklere af sådanne systemer. Busybox konfigureres så kun de ønskede
værktøjer medtages og disse pakkes så til en enkelt eksekverbar fil,
dette betyder at størrelsen holdes på et minimum. Busybox på AR.Drone
fylder 483 kb.
\\Den firmware der står for selve styringen, transmitteringen af
data og bearbejdning af sensordata i forbindelse med flyvning er
implementeret i /bin/program.elf. Da der er tale om proprietært
software kan vi ikke udtale os om hvordan programmet er implementeret,
vi kan dog udlede forskellige elementer efter at have observeret
dronen under flyvning. Program.elf indeholder blandt andet en PID
controller til at stabilisere dronen når der svæves og en algoritme
til at udlede dronens hastighed ved hjælp af bundkameraet. Program.elf
modtager kommandoer fra brugeren gennem en UDP port, selve UDP
interfacet beskrives i afsnit~\ref{ssec:kommunikation}.
%\lstinputlisting[language=Python]{../drone.py}
\subsection{Kommunikation}
\label{ssec:kommunikation}

\subsection{Fysik}
\label{ssec:fysik}
Dronen har 4 rotorvinger siddende i hver sit hjørne af et stativkryds
på dronen.  2 motorer drejer 2 rotorer den ene vej (med uret), mens det
andet par motorer og rotorer drejer den anden vej (imod uret). Dronen
har 3 bevægelsesakser (x, y og z). Alle dronens bevægelser styres ved
at kontrolere dronens vinkel i forhold til de 3 akser, eg. skal dronen
flyve fremad roteres dronen så den hælder fremad, dvs.  forenden
kommer lidt under bagenden ift afstanden til gulvet. Sagt i de
korrekte termer så roteres dronen en smule om y-aksen (pitch).
Ligesom med y- eller en pitch-akse, er der ved drejning af dronen
omkring x-aksen(roll) og z-aksen(yaw) en resulterende bevægelse
henholdsvis sidelæns og omkring dronens center.

max flyvehastighed - krængning?

plus figure

\pagebreak

\appendix

\bibliographystyle{abbrv}
\bibliography{referencer}

\section{Appendix header A}


\end{document}

%\begin{center}
%  \includegraphics[scale=0.35]{pic/selfserv.jpg}
%\newline
%\textbf{Figur 1}
%\end{center}
